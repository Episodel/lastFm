{"version":3,"sources":["./src/app/pages/albums/albums.component.html","./src/app/core/api/api.service.ts","./src/app/pages/albums/albums.module.ts","./src/app/core/api/routes/albums-api.service.ts","./src/app/pages/albums/albums.component.ts","./src/app/pages/albums/albums.component.scss"],"names":[],"mappings":"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","file":"pages-albums-albums-module.js","sourcesContent":["export default \"<div class=\\\"albums\\\">\\n  <div class=\\\"albums__content\\\">\\n    <app-album-card\\n      *ngFor=\\\"let a of albums; let i = index\\\"\\n      [albumData]=\\\"a\\\"\\n      [idx]=\\\"i\\\"\\n      (addToLocalStorage)=\\\"toLocalStorage($event)\\\"\\n    ></app-album-card>\\n  </div>\\n</div>\\n\";","import { Injectable } from '@angular/core';\nimport { AlbumsApiService } from './routes/albums-api.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ApiService {\n  constructor(public topic: AlbumsApiService) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AlbumsComponent } from './albums.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from '../../shared/shared.module';\n\nconst routes: Routes = [{ path: '', component: AlbumsComponent }];\n\n@NgModule({\n  declarations: [AlbumsComponent],\n  imports: [CommonModule, RouterModule.forChild(routes), SharedModule],\n})\nexport class AlbumsModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { finalize, map } from 'rxjs/operators';\nimport { IAlbum } from '../../../shared/components/interface/album.interface';\nimport { SpinnerService } from '../../../shared/services/spinner.service';\nimport { AlbumsStorage } from '../../localStorege/routes/album.storeg';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AlbumsApiService {\n  constructor(private http: HttpClient, private spinnerS: SpinnerService) {}\n  private apiKey = '22e5dcb7293a23da484afeacce80c247';\n\n  public getAlbums(genre: string): Observable<IAlbum[]> {\n    this.spinnerS.show();\n    return this.http\n      .get(\n        `http://ws.audioscrobbler.com/2.0/?method=tag.gettopalbums&format=json&api_key=${this.apiKey}&tag=${genre}`\n      )\n      .pipe(\n        map((a: any) => a.albums.album),\n        map((item: any) => {\n          const albums = AlbumsStorage.get();\n          return item.map((album: any) => ({\n            image: album.image,\n            artist: album.artist,\n            name: album.name,\n            like: albums.some((a: IAlbum) => a.name === album.name),\n          }));\n        }),\n        finalize(() => this.spinnerS.hide())\n      );\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router, Params } from '@angular/router';\nimport { ApiService } from '../../core/api/api.service';\n\nimport { IAlbumStorage } from '../../shared/components/interface/album-storage.interface';\nimport { AlbumsStorage } from '../../core/localStorege/routes/album.storeg';\nimport { IAlbum } from '../../shared/components/interface/album.interface';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { AlbumsService } from '../../shared/services/albums.service';\nimport { debounceTime, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'app-albums',\n  templateUrl: './albums.component.html',\n  styleUrls: ['./albums.component.scss'],\n})\nexport class AlbumsComponent implements OnInit, OnDestroy {\n  genre = '';\n  albums: IAlbum[] = [];\n  albumsDefault: IAlbum[] = [];\n\n  destroySubject$: Subject<void> = new Subject<void>();\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private API: ApiService,\n    private _snackBar: MatSnackBar,\n    private albumsS: AlbumsService\n  ) {}\n\n  ngOnInit(): void {\n    this.route.params\n      .pipe(takeUntil(this.destroySubject$))\n      .subscribe((params: Params) => {\n        this.genre = params.genre;\n      });\n\n    this.albumsS\n      .getSearch$()\n      .pipe(debounceTime(500), takeUntil(this.destroySubject$))\n      .subscribe((value) => {\n        this.albums = !!value\n          ? this.albumsDefault.filter(\n              (a) =>\n                a.name.toLowerCase().includes(value.toLowerCase()) ||\n                a.artist.name.toLowerCase().includes(value.toLowerCase())\n            )\n          : this.albumsDefault;\n      });\n\n    this.API.topic.getAlbums(this.genre).subscribe((res) => {\n      this.albums = this.albumsDefault = res;\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroySubject$.next();\n  }\n\n  private openSnackBar(message: string, action: string) {\n    this._snackBar.open(message, action, {\n      duration: 2000,\n    });\n  }\n\n  public toLocalStorage(data: IAlbumStorage): void {\n    this.albums[data.idx].like = !this.albums[data.idx].like;\n\n    if (!this.albums[data.idx].like) {\n      AlbumsStorage.remove(data.albumData);\n      this.albumsS.setCounterLike(this.getCountLikes);\n      this.openSnackBar(data.albumData.name, 'Remove like');\n      return;\n    }\n    const indexAlbum = AlbumsStorage.get().findIndex(\n      (a: IAlbum) => a.name === data.albumData.name\n    );\n\n    if (indexAlbum === -1) {\n      const albums = [...AlbumsStorage.get(), data.albumData];\n      AlbumsStorage.set(albums);\n    } else {\n      const albums = AlbumsStorage.get();\n      albums[indexAlbum].like = data.albumData.like;\n      AlbumsStorage.set(albums);\n    }\n    this.albumsS.setCounterLike(this.getCountLikes);\n    this.openSnackBar(data.albumData.name, 'Like');\n  }\n\n  get getCountLikes(): number {\n    return AlbumsStorage.get().length;\n  }\n}\n","export default \".albums__header {\\n  height: 80px;\\n  max-width: 100%;\\n  background-color: black;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 0 15px;\\n}\\n.albums__link {\\n  text-decoration: none;\\n  color: antiquewhite;\\n  font-size: 2rem;\\n}\\n.albums__text-field {\\n  margin-left: 30px;\\n  width: 300px;\\n  height: 37px;\\n  border-radius: 5px;\\n  font-size: 1.7rem;\\n  padding: 0 10px;\\n}\\n.albums__icon {\\n  margin-right: 40px;\\n  position: relative;\\n}\\n.albums__icon img {\\n  height: 30px;\\n}\\n.albums__icon__content {\\n  content: \\\"\\\";\\n  width: 25px;\\n  height: 25px;\\n  background-color: cornflowerblue;\\n  position: absolute;\\n  right: -15px;\\n  top: -10px;\\n  border-radius: 50%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.albums__content {\\n  margin: 30px 0;\\n  padding: 0 15px;\\n  display: grid;\\n  grid-template-columns: repeat(5, 1fr);\\n  grid-gap: 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFxhbGJ1bXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUU7RUFDRSxZQUFBO0VBQ0EsZUFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0FBREo7QUFJRTtFQUNFLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0FBRko7QUFLRTtFQUNFLGlCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtBQUhKO0FBTUU7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0FBSko7QUFNSTtFQUNFLFlBQUE7QUFKTjtBQU9JO0VBQ0UsV0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0NBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtBQUxOO0FBU0U7RUFDRSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSxxQ0FBQTtFQUNBLGNBQUE7QUFQSiIsImZpbGUiOiJhbGJ1bXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWxidW1zIHtcblxuICAmX19oZWFkZXIge1xuICAgIGhlaWdodDogODBweDtcbiAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAwIDE1cHg7XG4gIH1cblxuICAmX19saW5rIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgY29sb3I6IGFudGlxdWV3aGl0ZTtcbiAgICBmb250LXNpemU6IDJyZW07XG4gIH1cblxuICAmX190ZXh0LWZpZWxkIHtcbiAgICBtYXJnaW4tbGVmdDogMzBweDtcbiAgICB3aWR0aDogMzAwcHg7XG4gICAgaGVpZ2h0OiAzN3B4O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBmb250LXNpemU6IDEuN3JlbTtcbiAgICBwYWRkaW5nOiAwIDEwcHg7XG4gIH1cblxuICAmX19pY29uIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDQwcHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgaW1nIHtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICB9XG5cbiAgICAmX19jb250ZW50IHtcbiAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICB3aWR0aDogMjVweDtcbiAgICAgIGhlaWdodDogMjVweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IGNvcm5mbG93ZXJibHVlO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IC0xNXB4O1xuICAgICAgdG9wOiAtMTBweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxuICB9XG5cbiAgJl9fY29udGVudCB7XG4gICAgbWFyZ2luOiAzMHB4IDAgO1xuICAgIHBhZGRpbmc6IDAgMTVweDtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDUsIDFmcik7XG4gICAgZ3JpZC1nYXA6IDE1cHg7XG4gIH1cbn1cbiJdfQ== */\";"],"sourceRoot":"webpack:///"}